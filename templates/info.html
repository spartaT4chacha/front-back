<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- í˜ì´ì§€ ì´ë¦„ -->
    <title>My info | Chacha</title>
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="shortcut icon" type="image/x-icon" sizes="16x16" href="../static/icon/favicon.ico">
    <link rel="icon" type="image/x-icon" sizes="16x16" href="../static/icon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" href="../static/info.css">
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@500&family=Noto+Serif+KR:wght@500&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- JQueryë¥¼ import í•©ë‹ˆë‹¤ -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- slick -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <!--login js import -->
    <script src="../static/js/sign.js"></script>
</head>

<script>


    $(document).ready(async function () {
        $('.post-wrapper').slick({
            // í•œë²ˆì— ë³´ì—¬ì§€ëŠ” ì¹´ë“œ ìˆ˜
            slidesToShow: 4,
            // í•œë²ˆì— ë„˜ê¸¸ ì¹´ë“œ ìˆ˜
            slidesToScroll: 1,
            // ìë™ ì¬ìƒ
            autoplay: true,
            // ìë™ ë„˜ê¸°ëŠ” ì†ë„
            autoplaySpeed: 1500,
            // ë²„íŠ¼ ì•ˆë³´ì´ê²Œ
            nextArrow: $('.next'),
            prevArrow: $('.prev'),
        });
        await signStatus();
        if (isLogin) {
            //    ë¡œê·¸ì¸ ëœ ì‚¬ìš©ìëŠ” ë‚´ì •ë³´í˜ì´ì§€ì— ì ‘ê·¼í• ë•Œ ë³„ë‹¤ë¥¸ ì´ë²¤íŠ¸ê°€ í•„ìš” ì—†ìŒ-> ìœ ì € ì´ë¦„ê³¼ ì´ë©”ì¼ì„ í˜ì´ì§€ì— ë„ì–´ì£¼ì–´ì•¼ í•¨. ì°œ ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì£¼ì–´ì•¼ í•¨.
            let ID = await sign_getID();
            let nickName = await sign_getNickname();
            // console.log(ID)
            console.log(nickName)
            $("#userName").text(nickName);
            $("#userEmail").text(ID);
        } else {
            window.alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.")
            window.location.replace("/")
        }
        await showScrap()

    });

    async function signStatus() {
        isLogin = await sign_checkSign();
        if (isLogin) signin_mode();
        else signout_mode();
    }

    function signin_mode() {
        isLogin = true;
    }

    function signout_mode() {
        isLogin = false;
        sign_signout();
    }

    async function signinout() {
        if (isLogin) {
            signout_mode();
        } else {
            let id = $('#signin_id').val();
            let pass = $('#signin_pass').val();

            let result = await sign_signin(id, pass)
            if (result) {
                if (result['success']) {
                    alert(result['success']);
                    window.location.replace('/');
                } else if (result['fail']) alert(result['fail'])
            } else alert('ì„œë²„ì—°ê²°ì‹¤íŒ¨')
        }
    }


    async function showScrap() {
        let access_token = await get_access_token();
        $.ajax({
            type: "GET",
            url: "/tea/scrapList",
            data: {},
            headers: {"Authorization": "Bearer " + access_token},
            success: function (response) {
                if (response['scrapTeas']) {
                    let scrapTea = response['scrapTeas']
                    for (let i = 0; i < scrapTea.length; i++) {
                        let name = scrapTea[i]['name']
                        let img = scrapTea[i]['img']

                        let temp_html = `<div class="post">
                                              <img style="display: inline-block;"
                                                   src="${img}"
                                                   class="slider-image">
                                              <p>${name}</p>
                                          </div>`
                        $('.post-wrapper').slick('slickAdd', temp_html)
                    }
                }
            }
        })
    }

</script>


<body>
<!-- ì™¼ìª½ -->
<div class="left_side">
    <div class="left_top">
        <a href="./index">ì°¨ï§¾</a>
    </div>
    <div class="left_middle">
        <div class="big_Title">
            <!-- í˜ì´ì§€ ìš©ë„ì— ë§ì¶°ì„œ ìˆ˜ì • í•„ìš”-->
            <p style="color:#C53709; text-align: left; padding-left: 20px;">My<br>Information</p>
        </div>
    </div>
    <div class="left_bottom">
    </div>
</div>
<!-- ì˜¤ë¥¸ìª½ -->
<div class="right_side">
    <div class="right_top">
        <ul class="manager_nav" id="right_nav">
            <li class="right_nav-item1">
                <a href="#"><span class="material-icons md-36">&#xE87C;</span></a>
            </li>
            <li class="right_nav-item2">
                <a href="/" onclick="signinout()">ë¡œê·¸ì•„ì›ƒ</a>
            </li>
        </ul>
    </div>
    <div class="right_middle">

        <!-- ì œëª© ë¶€ë¶„ -->
        <div class="saveform-box">
            <div class="information_title">
                <p style="text-align: left;">My Information</p>
            </div>

            <div class="saveform">
                <div class='info1'>
                    <div class="insert_form">
                        <div class="insert_form_name">
                            <span class="insert_text">ì´ë¦„</span>
                        </div>
                        <!-- ì‚¬ìš©ì ì´ë¦„ -->
                        <p class="insert_input" id="userName" style="color: #777; font-weight: lighter;"></p>
                    </div>
                    <div class="insert_form">
                        <div class="insert_form_name">
                            <!-- ì‚¬ìš©ì ì´ë©”ì¼ -->
                            <span class="insert_text">ì´ë©”ì¼</span>
                        </div>
                        <p class="insert_input" id="userEmail" style="color: #777; font-weight: lighter;"></p>
                    </div>
                </div>
                <a href="/info_edit">
                    <button class="btn"><span style="font-size: 18px;">íšŒì›ì •ë³´ ìˆ˜ì •</span></button>
                </a>

                <div class='info2'>
                    <div class="small_title" style="margin-bottom: 10px;">
                        <span>| </span>
                        <span style="font-size: 30px; font-weight: bold;">zzim</span> <span
                            style="font-size: 23px;">ğŸ’˜</span>
                        <a href="/zzim_list" class="zzim-button"><span style="font-size: 15px;">ë”ë³´ê¸°</span></a>
                    </div>
                    <hr width="1017" color="#C53709;" size="2px">
                    <div style="position:relative;">
                        <!--page slider -->
                        <div class="post-slider">
                            <div class="post-wrapper">


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="right_bottom"></div>
</div>
</body>